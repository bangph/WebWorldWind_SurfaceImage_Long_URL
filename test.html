<!DOCTYPE html>
<html lang="en">
<head>
    <!--NOTE: Most Web WorldWind examples use jquery, Bootstrap and requirejs but those technologies are NOT-->
    <!--required by Web WorldWind. See SimplestExample.html for an example of using Web WorldWind without them.-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
</head>
<body>
<div class="container">
    <div class="row">
        <div class="col-sm-3">
            <h4><b>WKT Multipolygon Regions</b></h4>
              <div class="form-group">
              <select class="form-control" id="wktList">
                <option value="null">Select region to be input vector:</option>
                <option value="texas">Texas</option>
                <option value="queensland">Queensland</option>
              </select>
        </div>

            <br>
            <h4><b>WCS Coverage</b></h4>
              <div class="form-group">
              <select class="form-control" id="coverageList">
                <option value="null">Select coverage to be input raster</option>
                <option value="world_map_rgb_700MB">world_map_rgb_700MB</option>
              </select>
        </div>

            <br>
            <h4><b>WCS request (generated)</b></h4>
              <div class="form-group">
                  <textarea class="form-control" rows="20" id="wcsRequestTextarea" readonly>Select a WKT Multipolygon and a coverage to see the generated WCS request...</textarea>
              </div>

            <br>
            <button id="clipButton" class="btn btn-primary" type="button">
                Clip WKT Multipolygon with Raster
                <span class="glyphicon glyphicon-scissors"></span>
            </button>         

        </div>
        <div class="col-sm-9" id="globe">
	    <img id="image1" width="1000" height="1000"/>
            <canvas id="canvasOne" width="1000" height="1000" style="width: 100%; height: auto">
                Your browser does not support HTML5 Canvas.
            </canvas>
        </div>
    </div>
</div>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/spin.js/2.3.2/spin.min.js"></script>
    <script>

    $( document ).ready(function() {
            var wcsRequestTemplate = "http://localhost:8080/rasdaman/ows?service=WCS&version=2.0.1&request=GetCoverage&coverageId=$COVERAGE&format=image/png&clip=$WKT";

            // Handle submitting button for clipping data
            $("#clipButton").on('click', function() {
                var coverage = "world_map_new";
                var wcsRequest = wcsRequestTemplate.replace("$COVERAGE", coverage);

                // e.g: texas
                var wktId = $("#wktList").val();
                wcsRequest = wcsRequest.replace("$WKT", "MULTIPOLYGON(((-27.931346893310547 153.415252685546875,-27.931541442871094 153.415756225586051,-27.931516647338867 153.416259765625227,-27.931417465209961 153.416763305664062,-27.931386947631836 153.417297363281364,-27.931354522705078 153.41780090332054,-27.931268692016545 153.418228149414176,-27.931392669677734 153.418533325195426,-27.931556701660156 153.418624877929801,-27.931705474853459 153.418701171875227,-27.931888580322209 153.418807983398551,-27.93195915222168 153.418853759765625,-27.932184219360352 153.418869018554688,-27.932380676269474 153.418762207031705,-27.932584762573242 153.418655395507812,-27.932825088500977 153.418579101562614,-27.933126449584961 153.41845703125,-27.933525085449162 153.418365478515852,-27.93401908874506 153.418319702148665,-27.934543609619084 153.418212890625,-27.93505859375 153.418045043945426,-27.935579299926644 153.417877197265966,-27.935905456542912 153.417861938476676,-27.936128616332951 153.417861938476676,-27.936641693115178 153.418045043945426,-27.937118530273381 153.418228149414176,-27.937564849853516 153.418441772461051,-27.937917709350586 153.418746948242415,-27.938276290893555 153.418991088867301,-27.938722610473576 153.418945312500227,-27.93922042846674 153.418792724609375,-27.939727783203011 153.418823242187614,-27.939851760864201 153.418685913085938,-27.940031051635685 153.418487548828125,-27.940109252929574 153.418411254882812,-27.940252304077035 153.417816162109489,-27.940275192260742 153.417495727539404,-27.940282821655273 153.417251586914176,-27.940340042114201 153.41693115234375,-27.940511703491154 153.41656494140625,-27.940458297729492 153.416091918945767,-27.939998626708928 153.415573120117301,-27.939378738403263 153.41511535644554,-27.938722610473576 153.414810180664176,-27.938068389892578 153.414733886718977,-27.937534332275277 153.414718627929801,-27.93714714050293 153.414688110351562,-27.936870574951172 153.414550781250227,-27.936597824096623 153.414443969726904,-27.936309814453125 153.414352416992415,-27.935983657836914 153.414184570312955,-27.935529708862305 153.414031982421989,-27.935085296630859 153.41387939453125,-27.934749603271428 153.413726806640625,-27.934413909912109 153.413757324218864,-27.934112548828125 153.413833618164062,-27.933837890625 153.413742065429915,-27.933477401733342 153.413558959961165,-27.932950973510742 153.41351318359375,-27.932418823242188 153.41363525390625,-27.932231903076172 153.413391113281477,-27.932453155517521 153.41279602050804,-27.932373046874943 153.412338256836051,-27.932092666625977 153.411972045898438,-27.931774139404297 153.411666870117301,-27.931522369384709 153.411422729492188,-27.931295394897461 153.411331176757926,-27.93096923828125 153.411529541015739,-27.930513381957951 153.412200927734375,-27.930210113525391 153.412872314453125,-27.930110931396484 153.413391113281477,-27.930183410644474 153.413742065429915,-27.930454254150334 153.413986206054915,-27.930728912353459 153.414337158203239,-27.931051254272461 153.414764404296989,-27.931346893310547 153.415252685546875)),((-27.931346893310547 153.415252685546875,-27.931541442871094 153.415756225586051,-27.931516647338867 153.416259765625227,-27.931417465209961 153.416763305664062,-27.931386947631836 153.417297363281364,-27.931354522705078 153.41780090332054,-27.931268692016545 153.418228149414176,-27.931392669677734 153.418533325195426,-27.931556701660156 153.418624877929801,-27.931705474853459 153.418701171875227,-27.931888580322209 153.418807983398551,-27.93195915222168 153.418853759765625,-27.932184219360352 153.418869018554688,-27.932380676269474 153.418762207031705,-27.932584762573242 153.418655395507812,-27.932825088500977 153.418579101562614,-27.933126449584961 153.41845703125,-27.933525085449162 153.418365478515852,-27.93401908874506 153.418319702148665,-27.934543609619084 153.418212890625,-27.93505859375 153.418045043945426,-27.935579299926644 153.417877197265966,-27.935905456542912 153.417861938476676,-27.936128616332951 153.417861938476676,-27.936641693115178 153.418045043945426,-27.937118530273381 153.418228149414176,-27.937564849853516 153.418441772461051,-27.937917709350586 153.418746948242415,-27.938276290893555 153.418991088867301,-27.938722610473576 153.418945312500227,-27.93922042846674 153.418792724609375,-27.939727783203011 153.418823242187614,-27.939851760864201 153.418685913085938,-27.940031051635685 153.418487548828125,-27.940109252929574 153.418411254882812,-27.940252304077035 153.417816162109489,-27.940275192260742 153.417495727539404,-27.940282821655273 153.417251586914176,-27.940340042114201 153.41693115234375,-27.940511703491154 153.41656494140625,-27.940458297729492 153.416091918945767,-27.939998626708928 153.415573120117301,-27.939378738403263 153.41511535644554,-27.938722610473576 153.414810180664176,-27.938068389892578 153.414733886718977,-27.937534332275277 153.414718627929801,-27.93714714050293 153.414688110351562,-27.936870574951172 153.414550781250227,-27.936597824096623 153.414443969726904,-27.936309814453125 153.414352416992415,-27.935983657836914 153.414184570312955,-27.935529708862305 153.414031982421989,-27.935085296630859 153.41387939453125,-27.934749603271428 153.413726806640625,-27.934413909912109 153.413757324218864,-27.934112548828125 153.413833618164062,-27.933837890625 153.413742065429915,-27.933477401733342 153.413558959961165,-27.932950973510742 153.41351318359375,-27.932418823242188 153.41363525390625,-27.932231903076172 153.413391113281477,-27.932453155517521 153.41279602050804,-27.932373046874943 153.412338256836051,-27.932092666625977 153.411972045898438,-27.931774139404297 153.411666870117301,-27.931522369384709 153.411422729492188,-27.931295394897461 153.411331176757926,-27.93096923828125 153.411529541015739,-27.930513381957951 153.412200927734375,-27.930210113525391 153.412872314453125,-27.930110931396484 153.413391113281477,-27.930183410644474 153.413742065429915,-27.930454254150334 153.413986206054915,-27.930728912353459 153.414337158203239,-27.931051254272461 153.414764404296989,-27.931346893310547 153.415252685546875)),((-27.931346893310547 153.415252685546875,-27.931541442871094 153.415756225586051,-27.931516647338867 153.416259765625227,-27.931417465209961 153.416763305664062,-27.931386947631836 153.417297363281364,-27.931354522705078 153.41780090332054,-27.931268692016545 153.418228149414176,-27.931392669677734 153.418533325195426,-27.931556701660156 153.418624877929801,-27.931705474853459 153.418701171875227,-27.931888580322209 153.418807983398551,-27.93195915222168 153.418853759765625,-27.932184219360352 153.418869018554688,-27.932380676269474 153.418762207031705,-27.932584762573242 153.418655395507812,-27.932825088500977 153.418579101562614,-27.933126449584961 153.41845703125,-27.933525085449162 153.418365478515852,-27.93401908874506 153.418319702148665,-27.934543609619084 153.418212890625,-27.93505859375 153.418045043945426,-27.935579299926644 153.417877197265966,-27.935905456542912 153.417861938476676,-27.936128616332951 153.417861938476676,-27.936641693115178 153.418045043945426,-27.937118530273381 153.418228149414176,-27.937564849853516 153.418441772461051,-27.937917709350586 153.418746948242415,-27.938276290893555 153.418991088867301,-27.938722610473576 153.418945312500227,-27.93922042846674 153.418792724609375,-27.939727783203011 153.418823242187614,-27.939851760864201 153.418685913085938,-27.940031051635685 153.418487548828125,-27.940109252929574 153.418411254882812,-27.940252304077035 153.417816162109489,-27.940275192260742 153.417495727539404,-27.940282821655273 153.417251586914176,-27.940340042114201 153.41693115234375,-27.940511703491154 153.41656494140625,-27.940458297729492 153.416091918945767,-27.939998626708928 153.415573120117301,-27.939378738403263 153.41511535644554,-27.938722610473576 153.414810180664176,-27.938068389892578 153.414733886718977,-27.937534332275277 153.414718627929801,-27.93714714050293 153.414688110351562,-27.936870574951172 153.414550781250227,-27.936597824096623 153.414443969726904,-27.936309814453125 153.414352416992415,-27.935983657836914 153.414184570312955,-27.935529708862305 153.414031982421989,-27.935085296630859 153.41387939453125,-27.934749603271428 153.413726806640625,-27.934413909912109 153.413757324218864,-27.934112548828125 153.413833618164062,-27.933837890625 153.413742065429915,-27.933477401733342 153.413558959961165,-27.932950973510742 153.41351318359375,-27.932418823242188 153.41363525390625,-27.932231903076172 153.413391113281477,-27.932453155517521 153.41279602050804,-27.932373046874943 153.412338256836051,-27.932092666625977 153.411972045898438,-27.931774139404297 153.411666870117301,-27.931522369384709 153.411422729492188,-27.931295394897461 153.411331176757926,-27.93096923828125 153.411529541015739,-27.930513381957951 153.412200927734375,-27.930210113525391 153.412872314453125,-27.930110931396484 153.413391113281477,-27.930183410644474 153.413742065429915,-27.930454254150334 153.413986206054915,-27.930728912353459 153.414337158203239,-27.931051254272461 153.414764404296989,-27.931346893310547 153.415252685546875)),((-27.931346893310547 153.415252685546875,-27.931541442871094 153.415756225586051,-27.931516647338867 153.416259765625227,-27.931417465209961 153.416763305664062,-27.931386947631836 153.417297363281364,-27.931354522705078 153.41780090332054,-27.931268692016545 153.418228149414176,-27.931392669677734 153.418533325195426,-27.931556701660156 153.418624877929801,-27.931705474853459 153.418701171875227,-27.931888580322209 153.418807983398551,-27.93195915222168 153.418853759765625,-27.932184219360352 153.418869018554688,-27.932380676269474 153.418762207031705,-27.932584762573242 153.418655395507812,-27.932825088500977 153.418579101562614,-27.933126449584961 153.41845703125,-27.933525085449162 153.418365478515852,-27.93401908874506 153.418319702148665,-27.934543609619084 153.418212890625,-27.93505859375 153.418045043945426,-27.935579299926644 153.417877197265966,-27.935905456542912 153.417861938476676,-27.936128616332951 153.417861938476676,-27.936641693115178 153.418045043945426,-27.937118530273381 153.418228149414176,-27.937564849853516 153.418441772461051,-27.937917709350586 153.418746948242415,-27.938276290893555 153.418991088867301,-27.938722610473576 153.418945312500227,-27.93922042846674 153.418792724609375,-27.939727783203011 153.418823242187614,-27.939851760864201 153.418685913085938,-27.940031051635685 153.418487548828125,-27.940109252929574 153.418411254882812,-27.940252304077035 153.417816162109489,-27.940275192260742 153.417495727539404,-27.940282821655273 153.417251586914176,-27.940340042114201 153.41693115234375,-27.940511703491154 153.41656494140625,-27.940458297729492 153.416091918945767,-27.939998626708928 153.415573120117301,-27.939378738403263 153.41511535644554,-27.938722610473576 153.414810180664176,-27.938068389892578 153.414733886718977,-27.937534332275277 153.414718627929801,-27.93714714050293 153.414688110351562,-27.936870574951172 153.414550781250227,-27.936597824096623 153.414443969726904,-27.936309814453125 153.414352416992415,-27.935983657836914 153.414184570312955,-27.935529708862305 153.414031982421989,-27.935085296630859 153.41387939453125,-27.934749603271428 153.413726806640625,-27.934413909912109 153.413757324218864,-27.934112548828125 153.413833618164062,-27.933837890625 153.413742065429915,-27.933477401733342 153.413558959961165,-27.932950973510742 153.41351318359375,-27.932418823242188 153.41363525390625,-27.932231903076172 153.413391113281477,-27.932453155517521 153.41279602050804,-27.932373046874943 153.412338256836051,-27.932092666625977 153.411972045898438,-27.931774139404297 153.411666870117301,-27.931522369384709 153.411422729492188,-27.931295394897461 153.411331176757926,-27.93096923828125 153.411529541015739,-27.930513381957951 153.412200927734375,-27.930210113525391 153.412872314453125,-27.930110931396484 153.413391113281477,-27.930183410644474 153.413742065429915,-27.930454254150334 153.413986206054915,-27.930728912353459 153.414337158203239,-27.931051254272461 153.414764404296989,-27.931346893310547 153.415252685546875)),((-27.931346893310547 153.415252685546875,-27.931541442871094 153.415756225586051,-27.931516647338867 153.416259765625227,-27.931417465209961 153.416763305664062,-27.931386947631836 153.417297363281364,-27.931354522705078 153.41780090332054,-27.931268692016545 153.418228149414176,-27.931392669677734 153.418533325195426,-27.931556701660156 153.418624877929801,-27.931705474853459 153.418701171875227,-27.931888580322209 153.418807983398551,-27.93195915222168 153.418853759765625,-27.932184219360352 153.418869018554688,-27.932380676269474 153.418762207031705,-27.932584762573242 153.418655395507812,-27.932825088500977 153.418579101562614,-27.933126449584961 153.41845703125,-27.933525085449162 153.418365478515852,-27.93401908874506 153.418319702148665,-27.934543609619084 153.418212890625,-27.93505859375 153.418045043945426,-27.935579299926644 153.417877197265966,-27.935905456542912 153.417861938476676,-27.936128616332951 153.417861938476676,-27.936641693115178 153.418045043945426,-27.937118530273381 153.418228149414176,-27.937564849853516 153.418441772461051,-27.937917709350586 153.418746948242415,-27.938276290893555 153.418991088867301,-27.938722610473576 153.418945312500227,-27.93922042846674 153.418792724609375,-27.939727783203011 153.418823242187614,-27.939851760864201 153.418685913085938,-27.940031051635685 153.418487548828125,-27.940109252929574 153.418411254882812,-27.940252304077035 153.417816162109489,-27.940275192260742 153.417495727539404,-27.940282821655273 153.417251586914176,-27.940340042114201 153.41693115234375,-27.940511703491154 153.41656494140625,-27.940458297729492 153.416091918945767,-27.939998626708928 153.415573120117301,-27.939378738403263 153.41511535644554,-27.938722610473576 153.414810180664176,-27.938068389892578 153.414733886718977,-27.937534332275277 153.414718627929801,-27.93714714050293 153.414688110351562,-27.936870574951172 153.414550781250227,-27.936597824096623 153.414443969726904,-27.936309814453125 153.414352416992415,-27.935983657836914 153.414184570312955,-27.935529708862305 153.414031982421989,-27.935085296630859 153.41387939453125,-27.934749603271428 153.413726806640625,-27.934413909912109 153.413757324218864,-27.934112548828125 153.413833618164062,-27.933837890625 153.413742065429915,-27.933477401733342 153.413558959961165,-27.932950973510742 153.41351318359375,-27.932418823242188 153.41363525390625,-27.932231903076172 153.413391113281477,-27.932453155517521 153.41279602050804,-27.932373046874943 153.412338256836051,-27.932092666625977 153.411972045898438,-27.931774139404297 153.411666870117301,-27.931522369384709 153.411422729492188,-27.931295394897461 153.411331176757926,-27.93096923828125 153.411529541015739,-27.930513381957951 153.412200927734375,-27.930210113525391 153.412872314453125,-27.930110931396484 153.413391113281477,-27.930183410644474 153.413742065429915,-27.930454254150334 153.413986206054915,-27.930728912353459 153.414337158203239,-27.931051254272461 153.414764404296989,-27.931346893310547 153.415252685546875)))");
                
                /*// Send POST request to server and look at the center of the raster image on globe
                $.ajax({
                    type: 'GET',
                    url: "http://localhost:8080/rasdaman/ows?bbox=-22.5,135,-20.25,137.25&crs=EPSG:4326&format=image/png&height=256&layers=test_wms_4326&request=GetMap&service=WMS&styles=&transparent=TRUE&version=1.3.0&width=256"
                }).done(function (data) {
      var blb = new Blob([data], {type: 'image/png'});
    var url = (window.URL || window.webkitURL).createObjectURL(blb);
        document.getElementById("image1").src = url;
		}); */
var xhr = new XMLHttpRequest();
xhr.responseType = 'arraybuffer';
xhr.onload = function() {
    var blb = new Blob([xhr.response], {type: 'image/png'});
    var url = (window.URL || window.webkitURL).createObjectURL(blb);
    alert(url);
    document.getElementById("image1").src = url;
}

xhr.open('POST', 'http://localhost:8080/rasdaman/ows?bbox=-22.5,135,-20.25,137.25&crs=EPSG:4326&format=image/png&height=256&layers=test_wms_4326&request=GetMap&service=WMS&styles=&transparent=TRUE&version=1.3.0&width=256');
xhr.send();

	
            });

     });




    var wktDict = [];
    wkt1 = {
        "id": "texas", 
        "upper_left": [-9.2210989, 137.9910431],
        "lower_left": [-29.1807404, 137.9910431],
        "upper_right": [-9.2210989, 153.5541687],
        "lower_right": [-19.2009196, 153.5541687],
        "wkt": "MULTIPOLYGON(((-27.931346893310547 153.415252685546875,-27.931541442871094 153.415756225586051,-27.931516647338867 153.416259765625227,-27.931417465209961 153.416763305664062,-27.931386947631836 153.417297363281364,-27.931354522705078 153.41780090332054,-27.931268692016545 153.418228149414176,-27.931392669677734 153.418533325195426,-27.931556701660156 153.418624877929801,-27.931705474853459 153.418701171875227,-27.931888580322209 153.418807983398551,-27.93195915222168 153.418853759765625,-27.932184219360352 153.418869018554688,-27.932380676269474 153.418762207031705,-27.932584762573242 153.418655395507812,-27.932825088500977 153.418579101562614,-27.933126449584961 153.41845703125,-27.933525085449162 153.418365478515852,-27.93401908874506 153.418319702148665,-27.934543609619084 153.418212890625,-27.93505859375 153.418045043945426,-27.935579299926644 153.417877197265966,-27.935905456542912 153.417861938476676,-27.936128616332951 153.417861938476676,-27.936641693115178 153.418045043945426,-27.937118530273381 153.418228149414176,-27.937564849853516 153.418441772461051,-27.937917709350586 153.418746948242415,-27.938276290893555 153.418991088867301,-27.938722610473576 153.418945312500227,-27.93922042846674 153.418792724609375,-27.939727783203011 153.418823242187614,-27.939851760864201 153.418685913085938,-27.940031051635685 153.418487548828125,-27.940109252929574 153.418411254882812,-27.940252304077035 153.417816162109489,-27.940275192260742 153.417495727539404,-27.940282821655273 153.417251586914176,-27.940340042114201 153.41693115234375,-27.940511703491154 153.41656494140625,-27.940458297729492 153.416091918945767,-27.939998626708928 153.415573120117301,-27.939378738403263 153.41511535644554,-27.938722610473576 153.414810180664176,-27.938068389892578 153.414733886718977,-27.937534332275277 153.414718627929801,-27.93714714050293 153.414688110351562,-27.936870574951172 153.414550781250227,-27.936597824096623 153.414443969726904,-27.936309814453125 153.414352416992415,-27.935983657836914 153.414184570312955,-27.935529708862305 153.414031982421989,-27.935085296630859 153.41387939453125,-27.934749603271428 153.413726806640625,-27.934413909912109 153.413757324218864,-27.934112548828125 153.413833618164062,-27.933837890625 153.413742065429915,-27.933477401733342 153.413558959961165,-27.932950973510742 153.41351318359375,-27.932418823242188 153.41363525390625,-27.932231903076172 153.413391113281477,-27.932453155517521 153.41279602050804,-27.932373046874943 153.412338256836051,-27.932092666625977 153.411972045898438,-27.931774139404297 153.411666870117301,-27.931522369384709 153.411422729492188,-27.931295394897461 153.411331176757926,-27.93096923828125 153.411529541015739,-27.930513381957951 153.412200927734375,-27.930210113525391 153.412872314453125,-27.930110931396484 153.413391113281477,-27.930183410644474 153.413742065429915,-27.930454254150334 153.413986206054915,-27.930728912353459 153.414337158203239,-27.931051254272461 153.414764404296989,-27.931346893310547 153.415252685546875)))"
    };
    
    wktDict.push(wkt1);

     
		
    </script>      

</body>
</html>

